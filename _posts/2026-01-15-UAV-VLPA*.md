---
layout: post
title: "[Paper review] UAV-VLPA*: Vision-Language Mission Planning with Global-Local Optimization for Scalable UAV Route Generation"
tags: [Paper]
math: true
---

# UAV-VLPA* Paper Review

---
<https://arxiv.org/abs/2503.02454>

해당 논문은 이전 포스트인 UAV-VLA의 후속 연구인 것 같습니다. TSP(Traveling Salesman Problem)과 A* 알고리즘을 결합하여 더 효율적인 계획을 합니다. 해당 리뷰는 UAV-VLA 논문과 겹치는 부분이 많아 차이점만 간략하게 작성하고 리뷰하고자 합니다.

---
## Introduction
UAV-VLPA*는 수동 비행 데이터나 전문가 조정 지침 없이 효율적이고, 더 짧으며, 안전한 경로를 생성함으로써 UAV 내비게이션의 주요 과제를 해결합니다.

해당 논문의 기여는 세 가지입니다.
1. 전역적으로 최적화되고 장애물을 인지하는 UAV 경로 계획을 위해 Vision-Language 이해와 TSP 및 A*를 결합한 UAV-VLPA*를 제안합니다.
2. 수동 비행이나 환경별 튜닝의 필요성을 제거하는 확장 가능한 명령어 기반 탐색 시스템을 제시합니다.
3. UAV-VLPA*가 UAV-VLPA-nano-30 벤치마크에서 경로 효율성 측면에서 인간 전문가 및 베이스라인을 능가함을 입증합니다.

![image](/assets/images/uav-vlpa/uav-vlpa_image1.png)

---
## System Overview
기존 VLM은 이미지 상의 객체들을 순차적으로 왼쪽에서 오른쪽으로, 위에서 아래로 식별하여 장애물이나 공간적 관계를 고려하지 않은 출력을 제공합니다. 이러한 한계점을 해결하기 위해 다음과 같은 단계를 제안합니다.

#### System Workflow
- Instruction parsing, Vision-Language Processing, Waypoint Generation: VLM은 건물과 같은 장애물을 탐지하고 지정하며, 텍스트 제한 사항이 있는 경우 이를 해석합니다. 결과적으로 VLM 출력에 기반하여 종합적인 경유지 목록과 금지 영역이 생성됩니다.

![image](/assets/images/uav-vlpa/uav-vlpa_image2.png)

- TSP Route Construction: 모든 경유지를 효율적으로 포함하는 초기 경로를 구축합니다.

![image](/assets/images/uav-vlpa/uav-vlpa_image3.png)

- A* Path Refinement: TSP 솔루션의 각 구간을 정제하여 장애물을 회피하도록 합니다. 필요한 경우, 경로의 실현 가능성을 보장하기 위해 반복적으로 업데이트됩니다.

![image](/assets/images/uav-vlpa/uav-vlpa_image4.png)

- Final Path Output: 최적화되고 장애물이 없는 경로는 pipeline의 post-processing 부분으로 전달됩니다.

#### Traveling Salesman Problem
TSP 기반 컴포넌트는 사전 정의된 웨이포인트 세트를 통해 최적 또는 근사 최적 경로를 식별함으로써 총 이동 거리를 최소화하는 데 사용됩니다. 이를 위해 후보 경로를 반복적으로 개선하여 효율성을 높이는 지역 탐색 휴리스틱, 특히 2-opt 방식을 구현합니다. 이 단계는 생성된 경로가 거리 측면에서 모든 필수 웨이포인트를 최적으로 커버하도록 보장하며, 상세한 장애물 제약 조건은 후속 단계에서 처리됩니다.

#### Path Planning & Obstacle Avoidance
A* 알고리즘은 시작점에서 목표점까지 경로를 생성하는 가장 정확하고 빠른 도구 중 하나로 알려져 있어, 본 연구에서 주요 알고리즘으로 선택되었습니다. 대규모 환경에서 A* 알고리즘을 효율적으로 실행하기 위해, 지도(map)는 동일한 크기의 셀로 이루어진 균일한 그리드로 이산화되며, 각 셀은 그래프의 노드를 나타냅니다. 그리드 셀 크기는 5x5로 설정됩니다(1셀 = 5픽셀).
- Grid Creation: 연속적인 2D 영역은 $\delta_x, \delta_y$ 셀로 세분화됩니다. 각 셀에 대해 VLM에서 추출된 장애물 데이터를 기반으로 해당 셀이 이동 가능한지 확인합니다.
- Coordinate System Mapping: 각 셀에는 해당 행(i) 및 열(j) 인덱스에 해당하는 이산 좌표쌍 $(i,j)$이 할당됩니다.
- Traversability Check: 그리드 생성 중, 감지된 장애물과 교차하는 모든 셀은 이동 불가능한 것으로 표시됩니다. 이러한 셀은 최종 그래프에서 사실상 제거되어 A* 탐색이 확장하지 못하도록 합니다.

#### Path Planning & Obstacle Avoidance with TSP
TSP의 전역 최적화 속성과 A\*의 장애물 회피 능력을 모두 활용하기 위해, 하이브리드 접근 방식을 제안합니다. TSP 솔루션은 모든 웨이포인트 간의 최소 이동 순서를 식별하는 반면, A\*는 TSP 투어의 각 구간에서 장애물을 회피하기 위해 적용됩니다.

---
## Experimental Setup
UAV-VLPA* 시스템을 평가하기 위해 다음과 같은 자연어 지침을 사용했습니다. *"Create a flight plan for the quadcopter to fly around each building at a height of 100m, return to home, and land at the take-off point. Avoid lakes."*

실험은 NVIDIA RTX 4090 GPU와 Intel Core i9-13900K 프로세서가 장착된 워크스테이션에서 수행되었습니다. 양자화된 4비트 Molmo-7B-O BnB 모델을 사용했습니다.

---
## Experimental Results
TSP 통합으로 총 비행 거리가 크게 단축되었습니다. 생성된 경로는 UAV-VLA 벤치마크에 보고된 사람이 만든 경로의 63.89km에 비해 51.34km를 기록했습니다. 특히, 기존 경로 77.74km를 33.9% 이상 단축하여 TSP 기반 웨이포인트 재정렬의 이점을 확인했습니다.

TSP와 A\*를 모두 결합했을 때, UAV-VLPA\* 시스템이 최고의 성능을 달성했습니다. 결과 궤적은 51.27km였으며, 62.95km인 업데이트된 사람 참조 궤적보다 18.5% 더 나은 성능을 보였습니다. 전체 파이프라인의 총 실행 시간은 3분 이내였으나, 수작업 궤적 생성에서는 평균 35분이 소요되었습니다.

---
## Conclusion
- TSP 통합: 기존 UAV-VLA 대비 궤적 길이를 33.9% 단축했으며, 사람이 만든 경로 및 이전 시스템 생성 경로보다 우수했습니다.
- UAV-VLPA*(TSP+A\*): 51.27km의 궤적 길이로 최고의 성능을 달성했으며, 사람이 만든 참조 경로 대비 18.5% 향상되었고 여러 궤적 정렬 지표에서 가장 낮은 오차를 유지했습니다.
- 확장성 및 일반화: 개방형 위성 영상과 유연한 언어 입력을 사용하여 다양한 지리적 영역과 구조적 레이아웃을 성공적으로 처리했으며, 특정 환경 튜닝이 필요 없었습니다.

---
## Future Work
3D 지형 데이터, 동적 장애물 처리, 실시간 적응을 통합하여 임무 견고성을 더욱 강화할 것입니다. 실시간 추론 파이프라인 최적화 및 경로 생성 지연 시간 감소를 통해 실시간 배포를 위한 연산 효율성을 향상시킵니다. 최신 위성 또는 UAV 촬영 시각 데이터를 통합하여 동적 환경 적응을 지원하고, 임시 장애물이나 날씨 변화와 같은 변화하는 조건에 대한 반응형 재계획을 가능하게 합니다. 기내 UAV 시스템이 원격 서버와 통신하는 실제 비행 실험을 수행합니다. 이 설정에서, 고연산 VLM은 서버로 오프로드되고, 기내 구성 요소는 탐색 및 제어를 처리하여 경량 실행과 실시간 응답성을 보장합니다. 3D 환경으로 확장하여 지형 고도 데이터와 도시 구조물의 높이를 통합함으로써, 밀집되거나 불규칙한 지형에서의 보다 현실적이고 안전한 UAV 탐색을 가능하게 합니다.